FROM openjdk:11-jdk-slim

ARG CODERINTUITION_DATASOURCE_URL
ARG CODERINTUITION_DATASOURCE_USERNAME
ARG CODERINTUITION_DATASOURCE_PASSWORD
ARG CODERINTUITION_GOOGLE_CLIENT_ID
ARG CODERINTUITION_GOOGLE_CLIENT_SECRET
ARG CODERINTUITION_FACEBOOK_CLIENT_ID
ARG CODERINTUITION_FACEBOOK_CLIENT_SECRET
ARG CODERINTUITION_GITHUB_CLIENT_ID
ARG CODERINTUITION_GITHUB_CLIENT_SECRET
ARG CODERINTUITION_JWT_SECRET
ARG CODERINTUITION_MAILGUN_KEY
ARG CODERINTUITION_STRIPE_TESTKEY
ARG CODERINTUITION_STRIPE_LIVEKEY
ARG CODERINTUITION_STRIPE_MONTHLY_ID
ARG CODERINTUITION_STRIPE_YEARLY_ID
ARG CODERINTUITION_STRIPE_WEBHOOK_SECRET
ARG CODERINTUITION_JUDGE0_URL
ARG CODERINTUITION_JUDGE0_CALLBACK_URL
ARG CODERINTUITION_JUDGE0_RAPID_API_HOST
ARG CODERINTUITION_JUDGE0_RAPID_API_KEY

ENV CODERINTUITION_DATASOURCE_URL=$CODERINTUITION_DATASOURCE_URL
ENV CODERINTUITION_DATASOURCE_USERNAME=$CODERINTUITION_DATASOURCE_USERNAME
ENV CODERINTUITION_DATASOURCE_PASSWORD=$CODERINTUITION_DATASOURCE_PASSWORD
ENV CODERINTUITION_GOOGLE_CLIENT_ID=$CODERINTUITION_GOOGLE_CLIENT_ID
ENV CODERINTUITION_GOOGLE_CLIENT_SECRET=$CODERINTUITION_GOOGLE_CLIENT_SECRET
ENV CODERINTUITION_FACEBOOK_CLIENT_ID=$CODERINTUITION_FACEBOOK_CLIENT_ID
ENV CODERINTUITION_FACEBOOK_CLIENT_SECRET=$CODERINTUITION_FACEBOOK_CLIENT_SECRET
ENV CODERINTUITION_GITHUB_CLIENT_ID=$CODERINTUITION_GITHUB_CLIENT_ID
ENV CODERINTUITION_GITHUB_CLIENT_SECRET=$CODERINTUITION_GITHUB_CLIENT_SECRET
ENV CODERINTUITION_JWT_SECRET=$CODERINTUITION_JWT_SECRET
ENV CODERINTUITION_MAILGUN_KEY=$CODERINTUITION_MAILGUN_KEY
ENV CODERINTUITION_STRIPE_TESTKEY=$CODERINTUITION_STRIPE_TESTKEY
ENV CODERINTUITION_STRIPE_LIVEKEY=$CODERINTUITION_STRIPE_LIVEKEY
ENV CODERINTUITION_STRIPE_MONTHLY_ID=$CODERINTUITION_STRIPE_MONTHLY_ID
ENV CODERINTUITION_STRIPE_YEARLY_ID=$CODERINTUITION_STRIPE_YEARLY_ID
ENV CODERINTUITION_STRIPE_WEBHOOK_SECRET=$CODERINTUITION_STRIPE_WEBHOOK_SECRET
ENV CODERINTUITION_JUDGE0_URL=$CODERINTUITION_JUDGE0_URL
ENV CODERINTUITION_JUDGE0_CALLBACK_URL=$CODERINTUITION_JUDGE0_CALLBACK_URL
ENV CODERINTUITION_JUDGE0_RAPID_API_HOST=$CODERINTUITION_JUDGE0_RAPID_API_HOST
ENV CODERINTUITION_JUDGE0_RAPID_API_KEY=$CODERINTUITION_JUDGE0_RAPID_API_KEY

WORKDIR /home
ADD target/*.jar coderintuition.jar
EXPOSE 8080
ENTRYPOINT [ "java", "-jar", "coderintuition.jar" ]
